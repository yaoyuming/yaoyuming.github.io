<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Yahya"><meta name="keywords" content=""><meta name="description" content="目录镜像下载macOS Monterey 12.6.3 (21G419) 正式版 ISO、IPSW、PKG 下载 BIOS 设置官方建议OpenCore 官方建议的 10 代 CPU 架构的 BISO 调整如下： 禁用  Fast Boot Secure Boot Serial&#x2F;COM Port Parallel Port VT-d (如果设置了 DisableIoMapper 为 YE"><meta property="og:type" content="article"><meta property="og:title" content="黑苹果安装教程"><meta property="og:url" content="https://blog.yahyav2rayssr.top/posts/479c48ec/index.html"><meta property="og:site_name" content="yahya的博客"><meta property="og:description" content="目录镜像下载macOS Monterey 12.6.3 (21G419) 正式版 ISO、IPSW、PKG 下载 BIOS 设置官方建议OpenCore 官方建议的 10 代 CPU 架构的 BISO 调整如下： 禁用  Fast Boot Secure Boot Serial&#x2F;COM Port Parallel Port VT-d (如果设置了 DisableIoMapper 为 YE"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E5%AE%9A%E5%88%B6-1.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E5%AE%9A%E5%88%B6-2.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E5%AE%9A%E5%88%B6-3.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/206326768-84ef300a-e64e-4978-9e30-9c955d537a28.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E5%AE%9A%E5%88%B6-5.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/61c9107ad91f44016.jpg_e1080.jpg"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/1642342926-%E6%88%AA%E5%B1%8F2022-01-16-%E4%B8%8B%E5%8D%8810.08.25.jpg"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/1642342990-%E6%88%AA%E5%B1%8F2022-01-16-%E4%B8%8B%E5%8D%8810.17.21.jpg"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/image-20230319214910914.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/image-20230319214520473.png"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E6%9B%B4%E6%96%B0oc-1.jpg"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E6%9B%B4%E6%96%B0oc-2.jpg"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E6%9B%B4%E6%96%B0oc-3.jpg"><meta property="og:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E4%B8%89%E7%A0%81-1.png"><meta property="article:published_time" content="2023-04-16T03:08:32.417Z"><meta property="article:modified_time" content="2023-04-16T03:08:32.419Z"><meta property="article:author" content="Yahya"><meta property="article:tag" content="黑苹果"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://blog.yahyav2rayssr.top/posts/479c48ec/%E5%AE%9A%E5%88%B6-1.png"><title>黑苹果安装教程 - yahya的博客</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"blog.yahyav2rayssr.top",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!1,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!1,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:6},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="yahya的博客" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Yahya的博客</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="黑苹果安装教程"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-04-16 11:08" pubdate>2023年4月16日 上午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 8.8k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 73 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">黑苹果安装教程</h1><p class="note note-info">本文最后更新于：2023年4月16日 上午</p><div class="markdown-body"><h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><h2 id="镜像下载"><a href="#镜像下载" class="headerlink" title="镜像下载"></a>镜像下载</h2><p><a target="_blank" rel="noopener" href="https://sysin.org/blog/macOS-Monterey/">macOS Monterey 12.6.3 (21G419) 正式版 ISO、IPSW、PKG 下载</a></p><h2 id="BIOS-设置"><a href="#BIOS-设置" class="headerlink" title="BIOS 设置"></a>BIOS 设置</h2><h3 id="官方建议"><a href="#官方建议" class="headerlink" title="官方建议"></a>官方建议</h3><p>OpenCore 官方建议的 10 代 CPU 架构的 BISO 调整如下：</p><p><strong>禁用</strong></p><ul><li>Fast Boot</li><li>Secure Boot</li><li>Serial&#x2F;COM Port</li><li>Parallel Port</li><li>VT-d (如果设置了 <code>DisableIoMapper</code> 为 YES，则可以打开这个选项)</li><li>CSM</li><li>Thunderbolt (建议关闭雷电，第一次安装可能出现玄学问题)</li><li>Intel SGX</li><li>Intel Platform Trust</li><li>CFG Lock</li></ul><p><strong>开启</strong></p><ul><li>VT-x</li><li>Above 4G decoding</li><li>Hyper-Threading</li><li>Execute Disable Bit</li><li>EHCI&#x2F;XHCI Hand-off</li><li>OS type: Windows 8.1&#x2F;10 UEFI Mode</li><li>DVMT Pre-Allocated(iGPU Memory): 64MB</li><li>SATA Mode: AHCI</li></ul><h3 id="ASUS-11th"><a href="#ASUS-11th" class="headerlink" title="ASUS-11th"></a>ASUS-11th</h3><ul><li>disable igpu（Otherwise, you will not be able to sleep normally）</li><li>disable Intel Rapid Storage Technology 最后需要按键盘上的<code>F10</code>键保存退出即可.</li></ul><h3 id="ASUS-10th"><a href="#ASUS-10th" class="headerlink" title="ASUS-10th"></a>ASUS-10th</h3><ul><li>Disabe</li><li>Fast Boot</li><li>VT-d</li><li>CSM</li><li>Intel SGX</li><li>CFG Lock</li><li>Enable</li><li>VT-x (no option in BIOS, it’s enabled by default)</li><li>Above 4G decoding</li><li>Hyper-Threading</li><li>EHCI&#x2F;XHCI Hand-off</li><li>OS type: Windows UEFI Mode (Clear Secure Boot Keys or choose <code>Other</code> type)</li><li>DVMT Pre-Allocated(iGPU Memory): 64MB 最后需要按键盘上的<code>F10</code>键保存退出即可.</li></ul><h3 id="MSI-10th"><a href="#MSI-10th" class="headerlink" title="MSI-10th"></a>MSI-10th</h3><ul><li>Boot – Fast Boot -&gt; Disabled</li><li>Advanced – PCH Sorage Configuration – SATA Mode Selection -&gt; AHCI</li><li>Boot – CSM(Compatibility Support Module) -&gt; Disabled</li><li>Ai Tweaker – Ai Overclock Tuner -&gt; XMP</li><li>Advanced – CPU configuration – Intel Virtualization Technology -&gt; Disabled</li><li>Advanced – System Agent (SA) Configuration – VT-D -&gt; Disabled</li><li>Advanced – System Agent (SA) Configuration – Above 4G Decoding -&gt; Disabled</li><li>Advanced – System Agent (SA) Configuration – Graphics Configuration – Primary Display -&gt; CPU Graphics 集成显卡配置1</li><li>Advanced – System Agent (SA) Configuration – Graphics Configuration – iGPU Multi-Monitor -&gt; Disabled 集成显卡配置2</li><li>Advanced – PCH configruation - IOAPIC 24-119 Entries -&gt; Enabled</li><li>Advanced – PCH-FW Configuration – TPM Device Selection -&gt; Discrete TPM</li><li>Advanced – APM Configuration – ErP Ready -&gt; Disabled</li><li>Advanced – Network Stack Configuration – Network Stack -&gt; Disabled</li><li>Boot – Secure Boot – OS Type – Other OS 最后需要按键盘上的<code>F10</code>键保存退出即可.</li></ul><h3 id="MSI-11th"><a href="#MSI-11th" class="headerlink" title="MSI-11th"></a>MSI-11th</h3><ul><li>Boot – Fast Boot -&gt; Disabled</li><li>Advanced – PCH Sorage Configuration – SATA Mode Selection -&gt; AHCI</li><li>Boot – CSM(Compatibility Support Module) -&gt; Disabled</li><li>Ai Tweaker – Ai Overclock Tuner -&gt; XMP</li><li>Advanced – CPU configuration – Intel Virtualization Technology -&gt; Disabled</li><li>Advanced – System Agent (SA) Configuration – VT-D -&gt; Disabled</li><li>Advanced – System Agent (SA) Configuration – Above 4G Decoding -&gt; Disabled</li><li>Advanced – System Agent (SA) Configuration – Graphics Configuration – Primary Display -&gt; PCIE 独立显卡配置 1</li><li>Advanced – System Agent (SA) Configuration – Graphics Configuration – iGPU Multi-Monitor -&gt; Enabled 独立显卡配置 2</li><li>Advanced – PCH configruation - IOAPIC 24-119 Entries -&gt; Enabled</li><li>Advanced – PCH-FW Configuration – TPM Device Selection -&gt; Discrete TPM</li><li>Advanced – APM Configuration – ErP Ready -&gt; Disabled</li><li>Advanced – Network Stack Configuration – Network Stack -&gt; Disabled</li><li>Boot – Secure Boot – OS Type – Other OS 最后需要按键盘上的<code>F10</code>键保存退出即可.</li></ul><h2 id="USB-定制"><a href="#USB-定制" class="headerlink" title="USB 定制"></a>USB 定制</h2><p>1、从仓库下载 「Windows.exe」到 Windows 平台，双击即可运行</p><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus/blob/main/img-storage/%E5%AE%9A%E5%88%B6-1.png"><img src="/posts/479c48ec/定制-1.png" srcset="/img/loading.gif" lazyload alt="Image text" style="zoom:67%"></a></p><p>2、输入<code>D</code>然后回车来探测电脑上的端口</p><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus/blob/main/img-storage/%E5%AE%9A%E5%88%B6-2.png"><img src="/posts/479c48ec/定制-2.png" srcset="/img/loading.gif" lazyload alt="Image text" style="zoom:67%"></a></p><p>3、分别在各个 USB 接口插入<code>USB2.0</code>和<code>USB 3.X</code>的设备，每插入一次停留<code>5 秒钟</code>，如果有<code>Type-C</code>设备的话，正反都要分别插入记录都挨个插一遍后，输入<code>B</code> 回车即可返回主菜单</p><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus/blob/main/img-storage/%E5%AE%9A%E5%88%B6-3.png"><img src="/posts/479c48ec/定制-3.png" srcset="/img/loading.gif" lazyload alt="Image text" style="zoom:67%"></a></p><p>4、回到主菜单，输入<code>S</code>来查看端口探测的结果，此时结果查看感觉没问题的话，输入<code>K</code>回车，即可导出<code>UTBMap.kext</code>文件（一般情况下会保存在当前程序的同级目录下） <a target="_blank" rel="noopener" href="https://user-images.githubusercontent.com/99300084/206326768-84ef300a-e64e-4978-9e30-9c955d537a28.png"><img src="/posts/479c48ec/206326768-84ef300a-e64e-4978-9e30-9c955d537a28.png" srcset="/img/loading.gif" lazyload alt="image" style="zoom:67%"></a></p><p>5、除了上述生成的<code>UTBMap.kext</code>文件以外，我们还需要配合<code>USBToolBox.kext</code>使用（仓库）将上述两个 Kext 放到 OC 的 Kexts 文件夹下面并加载，去除 usbport.kext</p><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus/blob/main/img-storage/%E5%AE%9A%E5%88%B6-5.png"><img src="/posts/479c48ec/定制-5.png" srcset="/img/loading.gif" lazyload alt="Image text" style="zoom:67%"></a></p><p>6、重启即可生效，至此你的 USB 基本上定制完了，尽情使用吧。</p><h2 id="蓝牙配置"><a href="#蓝牙配置" class="headerlink" title="蓝牙配置"></a>蓝牙配置</h2><blockquote><p>2021 年 6 月初的 WWDC2021 上，苹果发布了下一代 macOS，代号 Monterey（蒙特雷），大版本号 12.0。爱折腾爱尝鲜的黑苹果小伙伴们已经通过各种折腾安装上了新版 macOS。但是很快出现了各种各样的驱动问题，其中比较突出的是蓝牙掉驱动并且卡跑码问题。Monterey 大幅精简了蓝牙框架，原因是 macOS 12.0 砍掉了 2015 年之前机型的支持，另外可能也是为通用控制做准备。</p><p>很快，OC 团队做出反应添加了解决方案。说起来也简单，就是新加一个驱动：<a target="_blank" rel="noopener" href="http://imacos.top/2021/03/18/brcmpatchram-kext/">BlueToolFixup.kext</a>，然后在 macOS 12.0 取消蓝牙 injector（注入器）的加载。</p><p>「注意」</p><ul><li>BlueToolFixup.kext 目前是 <a target="_blank" rel="noopener" href="http://imacos.top/2021/03/18/brcmpatchram-kext/">BrcmPatchRAM</a> 文件包中的一部分，新版本发布会直接包括这个文件，英特尔蓝牙也需要这个驱动；</li><li>使用奋威 T919 或其它免驱动型网卡的，无需担心蓝牙兼容性问题，在 Monterey 里依旧无需任何驱动。</li></ul></blockquote><img src="/posts/479c48ec/61c9107ad91f44016.jpg_e1080.jpg" srcset="/img/loading.gif" lazyload alt="BCM94360Z4 BCM94360Z3 黑苹果无线网卡驱动指南" style="zoom:50%"><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><ul><li>将 <a target="_blank" rel="noopener" href="http://imacos.top/2019/07/02/1534/">Lilu</a> 升级到 1.5.7 及以上；</li><li>博通卡：将 <a target="_blank" rel="noopener" href="http://imacos.top/2021/03/18/brcmpatchram-kext/">BrcmPatchRAM</a> 升级到 2.6.1 及以上；</li><li>英特尔：将 <a target="_blank" rel="noopener" href="http://imacos.top/2020/03/07/intelbluetoothfirmware-kext/">IntelBluetoothFirmware</a> 升级到 2.0.1 及以上；</li><li>关闭 OpenCore 的 XhciPortLimit，位于 config → Kernel → Quirks 区域，在升级或安装 macOS Monterey 之前，建议定制好 USB 接口；</li><li>将 BlueToolFixup.kext 放到 Clover&#x2F;OpenCore 对应的 kext 目录<ul><li>OpenCore：&#x2F;EFI&#x2F;OC&#x2F;Kexts&#x2F;</li><li>Clover：&#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;Other&#x2F;</li></ul></li><li>最后，按照下一章节的说明修改 config.plist 文件。</li></ul><h4 id="Clover-方法"><a href="#Clover-方法" class="headerlink" title="Clover 方法"></a>Clover 方法</h4><p>Clover 使用文件夹名称来区别各个系统加载的 kext，所以可以这么操作：</p><ul><li>博通卡：把 BrcmBluetoothInjector.kext 从 &#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;Other&#x2F; 挪到 &#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;11.0&#x2F;，将 BlueToolFixup.kext 放到 &#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;12.0&#x2F;</li><li>英特尔：把 IntelBluetoothInjector.kext 从 &#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;Other&#x2F; 挪到 &#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;11.0&#x2F;，将 BlueToolFixup.kext 放到 &#x2F;EFI&#x2F;CLOVER&#x2F;Kexts&#x2F;12.0&#x2F;</li></ul><p>如果没有 11.0&#x2F;12.0 的文件夹，自己新建就可以。这样一来 Clover 在引导 11.0 时会加载 Injector，但是引导 12.0 时则不会加载 Injector，会加载 BlueToolFixup.kext 。其它 Kext 文件继续放在 Other 目录无影响。</p><p>「注意」以上方法如果不起作用，那么在迁移到 Monterey 时，需要手动从 Kext 目录移除 Injector 文件。「提示」如果你没有从 12.0 切换到低版本 macOS 的需求，xxxxInjector .kext 可以直接删除（无论博通和英特尔都一样），无需设置文件夹；</p><h4 id="OpenCore-方法"><a href="#OpenCore-方法" class="headerlink" title="OpenCore 方法"></a>OpenCore 方法</h4><p>OpenCore 用户推荐使用另一种方法，利用 OpenCore 的最小内核（MinKernel）和最大内核（MaxKernel）特性，给 injector 设置最大内核 20.99.99，也就是对应 macOS Big Sur 11.0，给 BlueToolFixup.kext 设置最小内核 21.0.0，对应 macOS Monterey 12.0。</p><p>「提示」如果你没有从 12.0 切换到低版本 macOS 的需求，xxxxInjector .kext 可以直接删除（无论博通和英特尔都一样），也无需设置最大最小内核；</p><p>可以直接看图操作：</p><h5 id="博通免驱网卡"><a href="#博通免驱网卡" class="headerlink" title="博通免驱网卡"></a>博通免驱网卡</h5><blockquote><p>升级 macos 12 方式：</p><p>使用 <code>BlueToolFixup.kext</code> 替代掉 <code>BrcmBluetoothInjector.kext</code> 即可。</p><p>最终使用驱动如下：</p><ul><li>BlueToolFixup.kext</li><li>BrcmFirmwareData.kext</li><li>BrcmPatchRAM3.kext</li></ul></blockquote><img src="/posts/479c48ec/1642342926-%E6%88%AA%E5%B1%8F2022-01-16-%E4%B8%8B%E5%8D%8810.08.25.jpg" srcset="/img/loading.gif" lazyload alt="img"><h5 id="Intel无线网卡"><a href="#Intel无线网卡" class="headerlink" title="Intel无线网卡"></a>Intel无线网卡</h5><blockquote><p>升级 macos 12 方式：</p><p>使用 <code>BlueToolFixup.kext</code> 替代掉 <code>IntelBluetoothInjector.kext</code> 即可。</p><p>BlueToolFixup.kext 可以从这里下载：<a target="_blank" rel="noopener" href="https://github.com/acidanthera/BrcmPatchRAM/releases">https://github.com/acidanthera/BrcmPatchRAM/releases</a></p><p>最终使用驱动如下：</p><ul><li>BlueToolFixup.kext</li><li>IntelBluetoothFirmware.kext</li></ul></blockquote><img src="/posts/479c48ec/1642342990-%E6%88%AA%E5%B1%8F2022-01-16-%E4%B8%8B%E5%8D%8810.17.21.jpg" srcset="/img/loading.gif" lazyload alt="img"><p>完成后，记得保存然后重启，如果无效，请关机冷启动，清除 Kext 缓存，或尝试重置 NVRAM。</p><h2 id="设置启动参数"><a href="#设置启动参数" class="headerlink" title="设置启动参数"></a>设置启动参数</h2><blockquote><p>下面是 macOS 系统可以使用的启动参数列表，功能解释同时列出，使用要点有两个：</p><ul><li>参数之间以空格分隔开；</li><li>在一个参数中，- 和 &#x3D; 只会同时存在一个，例如：debug&#x3D;0x100，-xcpm。即：有了 &#x3D; 号就不会有 - 号，反之亦然，新手请务必牢记。</li></ul></blockquote><p>参数说明一览：</p><table><thead><tr><th>常用</th><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>*</td><td>agdpmod&#x3D;pikera</td><td>Navi 核心避免黑屏使用，其它显卡如 RX400&#x2F;500，Vega56&#x2F;64 无需此参数</td></tr><tr><td>*</td><td>keepsyms&#x3D;1</td><td>辅助上一个参数</td></tr><tr><td>*</td><td>debug&#x3D;0x100 或 debug&#x3D;0x200</td><td>防止自动重启，禁用五国图直接输出错误信息</td></tr><tr><td>*</td><td>-v</td><td>用于安装前期启动时显示代码界面，在安装macOS时，应添加此参数以获取明确的错误信息。</td></tr><tr><td></td><td>-x</td><td>安全启动模式，类似 Windows 的安全模式。此模式下 macOS 会尽可能少的加载 Kext 文件。</td></tr><tr><td></td><td>-s</td><td>单用户模式。这一模式将会启动终端模式，可以用这种方式修复你的系统。</td></tr><tr><td></td><td>-f</td><td>关闭 Kext 缓存模式，等于强制重建 Kext 缓存。</td></tr><tr><td></td><td>-l</td><td>在系统日志中输出内存泄漏的相关记录。</td></tr><tr><td></td><td>arch&#x3D;x86_64</td><td>该参数会强制 macOS 以 64 位内核模式启动，在 10.15 及以上没有什么作用。对应的是 arch&#x3D;i386，将强制以 32 位模式启动。</td></tr><tr><td></td><td>iog&#x3D;0x0</td><td>此参数将强制 MacBook 机型在合盖后，接入外部显示器和键盘时系统保持开启状态；但同时，此参数会在接入外部显示器时关闭笔记本的内屏，这可能对保护屏幕以及省电有帮助。</td></tr><tr><td></td><td>platform&#x3D;X86PC</td><td>此参数将强制禁用 ACPI 电源管理。而 platform&#x3D;ACPI 将强制启用 ACPI 电源管理。</td></tr><tr><td></td><td>idlehalt&#x3D;1</td><td>强制 CPU 进入低功耗模式。</td></tr><tr><td></td><td>debug&#x3D;0x100</td><td>此参数用于禁用五国图，把 Kernel Panic（内核崩溃）的相关数据直接输出在屏幕上，可用于禁止发生内核崩溃时自动重启，这将对排查错误有助益，这一参数还可以用于 Core Dump。其它可用值还有：0x200，这可以在内核崩溃后使用快捷键（C 继续、R 重启、K 进入 KDB）；0x400 可用于触发内核崩溃后自动进行 Core Dump；0x2000 将只生成并发送 Kernel Panic 日志，不包括完整的 Core Dump。除此之外还有很多其他值，但一般以上几个已经足够安装 macOS 时使用。</td></tr><tr><td></td><td>keepsyms&#x3D;1</td><td>此参数可以为 debug&#x3D;0xN 提供更多错误信息。</td></tr><tr><td></td><td>dart&#x3D;0</td><td>此参数会关闭 64 位硬件上的系统 PCI 地址映射器（DART）。DART 在拥有 2GB 以上物理内存的机器上是必需的，在默认情况下 DART 都是加载的。当使用 Clover 引导系统且 BIOS 无法关闭 VT-d 时可尝试此参数。gg</td></tr><tr><td></td><td>darkwake&#x3D;0</td><td>在拥有完全定制好的 USB 接口时完全不必使用此参数，除非你真的需要操控 HID Tickle 行为。darkwake 是 XNU 的一部分，XNU 是一个混合内核，是 Darwin 系统的一部分（macOS 和 iOS 均使用了 Darwin ）。因启动参数仅用于按位计算，所以可能的值有 0、1、2、3、256、257、258、259 等等以此类推，也因此 darkwake&#x3D;8 实际等于 darkwake&#x3D;0；darkwake&#x3D;10 实际等于 darkwake&#x3D;2，XNU 自 2782.1.97 起删除了这两个值（8 和 10），故这两个值在 Yosemite 及更高版本 macOS 中已失效。黑苹果建议关闭电能小憩，使用 pmset 命令调试休眠。如果实在需要使用，可尝试 darkwake&#x3D;0 或 3。更多信息可参考<a target="_blank" rel="noopener" href="https://heipg.cn/link/aHR0cHM6Ly93d3cuaW5zYW5lbHltYWMuY29tL2ZvcnVtL3RvcGljLzM0MjAwMi1kYXJrd2FrZS1vbi1tYWNvcy1jYXRhbGluYS1ib290LWFyZ3MtZGFya3dha2U4LWRhcmt3YWtlMTAtYXJlLW9ic29sZXRlLw==">外网这篇文章</a>。</td></tr><tr><td></td><td>nvda_drv&#x3D;1</td><td>用于启用英伟达显卡驱动，包括开启 NVIDIA Web Driver</td></tr><tr><td>*</td><td>nv_disable&#x3D;1</td><td>关闭英伟达显卡驱动，请勿与 nvda_drv&#x3D;1 同时使用。</td></tr><tr><td></td><td>-no_compat_check</td><td>用于禁用 macOS 兼容性检查。例如，macOS 11.0 BigSur 不再支持 iMac 2014 年之前推出的机型，此时可使用此参数以禁止兼容性检查，以达到安装目的。</td></tr><tr><td></td><td><del>kext-dev-mode&#x3D;1</del></td><td>开启 Kext 开发模式，将允许加载未签名的 Kext。在 Yosemite 及更高版本 macOS 中，默认情况下出于安全原因，只会加载已签名的 Kext。此参数可以在 Yosemite 更改此设置，允许加载未签名的 Kext。在比 Yosemite 更新的 macOS 版本（El Capitan）中，引入了另一种安全机制，即系统完整性保护（SIP，也称为 Rootless），该系统会防止修改系统文件，加载未签名的 Kext 等。SIP 可以通过注入正确的 CSR NVRAM 变量来禁用，也可以通过恢复分区运行命令行禁用它。总之，在 10.11 及以后的系统中，已无需此参数。</td></tr><tr><td></td><td>cpus&#x3D;1</td><td>CPU单核模式，用于限制系统中活动 CPU 的数量。苹果的开发者工具有一个选项用于启用或禁用系统中的一些 CPU，但你也可以通过这个参数指定要使用的 CPU 数量。在某些情况下，这也许有助于省电，或者你正在调试 X86 电源驱动。</td></tr><tr><td></td><td>-xcpm</td><td>用于强制开启 xcpm 以实现 CPU 原生电源管理，一般用于较老架构的 CPU，例如 Ivy Bridge。</td></tr><tr><td></td><td>-gux_no_idle</td><td>用于终止英特尔芯片的空闲模式（idle-mode）功能。</td></tr><tr><td></td><td>slide&#x3D;N</td><td>用于引导系统时分配系统内核在内存中的位置，Clover 在一排加号处卡住可以尝试 slide&#x3D;0，<a target="_blank" rel="noopener" href="https://heipg.cn/tutorial/what-is-efi-file.html#%E5%85%B3%E4%BA%8E-slide-%E5%80%BC">其它参考：Slide 值的说明</a>。</td></tr><tr><td></td><td>rootless&#x3D;0</td><td>使用 Rootless 模式，请勿在 El Capitan 及更高版本的 macOS 上使用，因为从 El Capitan 起引入了 SIP（系统完整性保护）机制。一般情况下关闭 SIP 即可达成你的目的。</td></tr><tr><td></td><td><del>-disablegfxfirmware</del></td><td>在 WhateverGreen.kext 出现之前，该参数用于关闭苹果的 iGPU firmware 以正确驱动 Intel 核显，在 macOS 10.13 及更高版本中已不使用。</td></tr><tr><td></td><td>npci&#x3D;0x2000 或 npci&#x3D;0x3000</td><td>AMD 系统没有开启 Above 4G Decoding 时使用；此参数会禁用某些与 kIOPCIConfiguratorPFM64 相关的 PCI 调试，另一个相似的选择是 npci&#x3D;0x3000，后者还会禁用与 gIOPCITunnelledKey 相关的调试。当 X299 卡在 PCI Start Configuration 时，应使用此参数，因为存在与 PCI 通道有关的 IRQ 冲突。</td></tr><tr><td>*</td><td>brcmfx-aspm</td><td>解决蓝牙连线问题，结合 AirportBrcmFixup.kext 使用</td></tr><tr><td></td><td>igfxonln&#x3D;1</td><td>使用 HDMI 接口每次开机&#x2F;重启都需要重新插拔才能显示的，添加启动参数 igfxonln&#x3D;1</td></tr><tr><td>*</td><td>-wegnoegpu</td><td>禁用独显（针对笔记本机型）</td></tr></tbody></table><p>切换到 NVRAM 选项卡，右侧找到 7C436110-AB2A-4BBB-A880-FE41995C9F82，启动参数即显示在右方面板，目前配置情况如下：</p><img src="/posts/479c48ec/image-20230319214910914.png" srcset="/img/loading.gif" lazyload alt="image-20230319214910914" style="zoom:67%"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">agdpmod=pikera keepsms=1 brcmfx-aspm<br></code></pre></td></tr></table></figure><h2 id="设置默认启动项"><a href="#设置默认启动项" class="headerlink" title="设置默认启动项"></a>设置默认启动项</h2><ul><li><p><code>config.plist</code> 勾上仿冒苹果快捷键 <code>PollAppleHotKey</code>，在启动选择界面，先选中要启动的项，然后按键盘的 <code>Ctrl</code> + <code>Enter</code> 进入系统即可</p><img src="/posts/479c48ec/image-20230319214520473.png" srcset="/img/loading.gif" lazyload alt="image-20230319214520473" style="zoom:67%"></li><li><p>也有看到说在 <code>设置</code>-<code>启动磁盘</code> 可选择默认启动项,修改后重启</p></li></ul><h2 id="更新-OC"><a href="#更新-OC" class="headerlink" title="更新 OC"></a>更新 OC</h2><ul><li>下载最新版本<code>OCAT</code>(<a target="_blank" rel="noopener" href="https://github.com/ic005k/OCAuxiliaryTools/releases">https://github.com/ic005k/OCAuxiliaryTools/releases</a>)</li><li>挂载你的<code>efi</code>分区（也叫<code>esp</code>分区） [<img src="/posts/479c48ec/%E6%9B%B4%E6%96%B0oc-1.jpg" srcset="/img/loading.gif" lazyload alt="Image text"></li><li>挂载后先不要着急打开，先把<code>OCAT</code>（即<code>OCAuxiliaryTools</code>）同步一下再打开 [<img src="/posts/479c48ec/%E6%9B%B4%E6%96%B0oc-2.jpg" srcset="/img/loading.gif" lazyload alt="Image text"></li><li>然后再打开<code>Config.plist</code>。首先点击全选，然后<code>检查kext</code>更新，更新<code>kext</code>，后点击选择<code>opencore版本</code>，选择<code>最新版</code>，<code>获取opencore</code>，后点击<code>同步</code> <code>保存</code>即可 [<img src="/posts/479c48ec/%E6%9B%B4%E6%96%B0oc-3.jpg" srcset="/img/loading.gif" lazyload alt="Image text"></li></ul><h2 id="生成三码"><a href="#生成三码" class="headerlink" title="生成三码"></a>生成三码</h2><p>1、同步完不必急着关闭<code>OCAT</code>，切换到<code>PL</code>选项卡</p><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus/blob/main/img-storage/%E4%B8%89%E7%A0%81-1.png"><img src="/posts/479c48ec/三码-1.png" srcset="/img/loading.gif" lazyload alt="Image text" style="zoom:67%"></a></p><p>2、首先点击<code>生成</code>生成<code>三码</code>，然后点击<code>生成</code>生成<code>rom</code>，<code>保存``重启</code>即可</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a target="_blank" rel="noopener" href="https://heipg.cn/tutorial/what-is-boot-args.html">黑苹果启动参数都是做什么用的？如何添加或删除？</a></p><p><a target="_blank" rel="noopener" href="https://imacos.top/2022/01/19/1022-4/">更新macOS Monterey后遇到的各种Bug及解决方法合集（持续更新）</a></p><p><a target="_blank" rel="noopener" href="http://imacos.top/2022/01/16/0354/">黑苹果修复博通&#x2F;英特尔蓝牙在macOS Monterey 12.0 正式版中失效的方法</a></p><p><a target="_blank" rel="noopener" href="https://apple.sqlsec.com/6-%E5%AE%9E%E7%94%A8%E5%A7%BF%E5%8A%BF/6-7.html">macOS 12 蓝牙</a></p><p><a target="_blank" rel="noopener" href="https://heipg.cn/tutorial/patching-intel-igpu-opencore.html">驱动英特尔核显，让黑苹果流畅运行「OpenCore专门篇」</a></p><p><a target="_blank" rel="noopener" href="https://apple.sqlsec.com/">国光黑苹果入门安装教程</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yq4y1o7cT/?vd_source=3893b0277053b206b8f4177198a5e3ca">【黑苹果】手把手黑苹果安装教程-基于 OpenCore（持续更新中）</a></p><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uF6B4wKNL2uG9pSmH8nZZw">【黑苹果】macOS 12 Monterey 原版 OC 引导安装教程</a></p><p><a target="_blank" rel="noopener" href="https://www.sqlsec.com/2021/07/opencore.html#%E6%B7%BB%E5%8A%A0%E5%BC%95%E5%AF%BC">国光 2021 年中的黑苹果组装方案以及驱动分享</a></p><p><a target="_blank" rel="noopener" href="https://blog.daliansky.net/minisforum-HX90G-and-HX99G-macOS-Ventura-Installation-Tutorial.html#more">minisforum HX80G&#x2F;HX90G&#x2F;HX99G兼Ventura安装教程</a></p><h2 id="EFI-下载"><a href="#EFI-下载" class="headerlink" title="EFI 下载"></a>EFI 下载</h2><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus">hackintosh-with-B560-msi-asus</a></p><p><a target="_blank" rel="noopener" href="https://github.com/Win10Q/hackintosh-with-B560-msi-asus">ASUS-MSI-10-11-HACKINTOSH-OPENCORE</a></p><p><a target="_blank" rel="noopener" href="https://github.com/sqlsec/AsRock-Z490-Steel-Legend-i7-10700">AsRock-Z490-Steel-Legend-i7-10700</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv16866050">国光 3k 元不到的 i9 极致性能的 ITX 黑苹果方案分享</a></p><p><a target="_blank" rel="noopener" href="https://www.sqlsec.com/2021/08/b560m.html">国光 微星 B560M Big Sur 黑苹果记录体验</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1iL411j7oC/?buvid=Z249572524E5C6EB4BC0A3BC9E9B43B2059F&is_story_h5=false&mid=qb0Tc188BMlV3OF7U8HM9Q==&p=1&plat_id=114&share_from=ugc&share_medium=iphone&share_plat=ios&share_session_id=F187CBE7-405F-4DAA-90C8-61F585568AC8&share_source=COPY&share_tag=s_i&timestamp=1678448208&unique_k=0AwuEE5&up_id=33242224&vd_source=3893b0277053b206b8f4177198a5e3ca">10400 msi b560黑苹果</a></p><p><a target="_blank" rel="noopener" href="https://www.yuque.com/qwetrz007sh/ptugso/ez5ttc">【黑苹果安装教程】i7 10700+微星B460M 迫击炮 WIFI</a></p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E9%BB%91%E8%8B%B9%E6%9E%9C/" class="category-chain-item">黑苹果</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/">#黑苹果</a></div></div><div class="license-box my-3"><div class="license-title"><div>黑苹果安装教程</div><div>https://blog.yahyav2rayssr.top/posts/479c48ec/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Yahya</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年4月16日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/4b23af26/" title="nginx 证书概念"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">nginx 证书概念</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/posts/3647b27d/" title="zookeeper 面试题"><span class="hidden-mobile">zookeeper 面试题</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"></div></footer><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){var t;"tocbot"in window&&(tocbot.refresh(),0!==(t=jQuery("#toc")).length)&&tocbot&&0<t.find(".toc-list-item").length&&t.css("visibility","visible")}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback(function(){if("anchors"in window){anchors.removeAll();var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>